function printIt(n){var t="";t+="<html><head>\n";t+='<script src="//code.jquery.com/jquery-1.11.2.min.js"><\/script>\n';t+="<script>\n";t+="var beforePrint = function() {\n";t+="};\n";t+="var afterPrint = function() {\n";t+="   window.close();\n";t+="};\n";t+="var is_chrome = function () { return Boolean(window.chrome); }\n";t+="if(is_chrome()){\n";t+="   window.matchMedia('print').addListener(function(media) {\n";t+="      if (media.matches) {\n";t+="         beforePrint();\n";t+="      } else {\n";t+="         $(document).one('mouseover', afterPrint);\n";t+="      }\n";t+="   });\n";t+="} else {\n";t+="   $(window).on('beforeprint', beforePrint);\n";t+="   $(window).on('afterprint', afterPrint);\n";t+="}\n";t+="$(window).load(function() {\n";t+="   window.print();\n";t+="});\n";t+="<\/script>\n";t+="<style>body, td { font-family: Verdana; font-size: 10pt; padding:10px; }<\/style>\n";t+="<\/head><body>\n";n.toString().indexOf("QR")!=-1?(winQR&&(winQR.close(),winQR=null),winQR=window.open(),self.focus(),winQR.document.open(),winQR.document.write(t),winQR.document.write(n+"\n"),winQR.document.write("<\/br><\/body><\/html>\n"),winQR.document.close()):(winBC&&(winBC.close(),winBC=null),winBC=window.open(),self.focus(),winBC.document.open(),winBC.document.write(t),winBC.document.write(n),winBC.document.write("<\/br><\/body><\/html>"),winBC.document.close())}var winQR,winBC,domainAccountApp,stoneListApp,domainAccountAppDirectives,stoneListAppDirectives;VERSION={version:"1.0.0.0"};$(window).on("beforeunload",function(){winBC&&(winBC.close(),winBC=null);winQR&&(winQR.close(),winQR=null)});domainAccountApp=angular.module("domainAccountApp",["domainAccountApp.directives","domainAccountApp.services"]);stoneListApp=angular.module("stoneListApp",["stoneListApp.directives","stoneListApp.services","ngSanitize","ngCsv","StoneService.Filters","StoneService.Services"]),function(){"use strict";function n(n,t){return n(t.SERVER_URL+"/bookmark",{},{save:{method:"POST",headers:{"Content-Type":"application/json"}},query:{method:"GET",isArray:!0}})}n.$inject=["$resource","ENV"];angular.module("StoneService.Services").factory("Bookmark",n)}(),function(){"use strict";function n(n,t){return n(t.GITHUB_URL+"/search/repositories?q=:query",{query:"@query"},{get:{method:"GET"}})}n.$inject=["$resource","ENV"];angular.module("StoneService.Services").factory("RepositorySearch",n)}();angular.module("domainAccountApp.services",["ngResource"]).factory("domainNamesConfig",["$resource",function(n){return n(ENV.OC_URL+"/DomainName/DomainNames",{},{getDomainNames:{method:"GET",isArray:!1}})}]).factory("AccountRepository",["$resource",function(n){return n(ENV.OC_URL+"api/:command",{},{login:{method:"GET",params:{command:"Account/Login",returnUrl:"@returnUrl",stayLogin:"@stayLogin"},isArray:!1}})}]).factory("domainAccountRepository",["$resource",function(n){return n(ENV.OC_URL+"/api/ApiDomain/:command",{},{getAccountsDomainList:{method:"GET",params:{command:"GetAllDomainsEx",Id:"@Id"},isArray:!0},getAccountsList:{method:"GET",params:{command:"GetAllDomains",Id:"@Id"},isArray:!0},getAccountsUserList:{method:"GET",params:{command:"GetAllUsers",Id:"@Id"},isArray:!0},getAccountsDomainTree:{method:"GET",params:{command:"GetAllDomainsTree"},isArray:!0},getLoggedInAccount:{method:"GET",params:{command:"GetLoggedInAccount",Id:"@Id"},isArray:!1},getPermittedAccounts:{method:"GET",params:{command:"GetAssociatedAccounts",Id:"@Id"},isArray:!0},getIsDomainServiceCenter:{method:"GET",dataType:"json",contentType:"application/json",params:{command:"GetIsDomainServiceCenter",Id:"@Id"},isArray:!1}})}]).factory("accountsRepository",["$resource",function(n){return n(ENV.OC_URL+"/Account/:command",{},{getAccountInfo:{method:"GET",params:{userId:"@userId",command:"GetAccountInfo"},isArray:!1},getPermissions:{method:"GET",params:{command:"GetUserPermissions"},isArray:!1}})}]).factory("accountInfoService",["$resource",function(n){return n(ENV.IP_URL+"/:command/:appId",{},{getUserDataExtended:{method:"GET",params:{command:"/api/v1/account/userdataextended",appId:"@appId"},isArray:!1}})}]).factory("ipRepository",["$resource",function(n){return n(ENV.IP_URL+"/:command/:userId/:graphId/:level",{},{getCustomers:{method:"GET",params:{command:"/api/v1/domain/graph/customer/settings/",userId:"@userId",graphId:"@graphId",level:"@level"},isArray:!0}})}]).service("accountsService",["accountsRepository",function(n){this.getAccountInfo=function(t,i){n.getAccountInfo({userId:t},function(n){i&&i(n)})};var t;this.getPermissions=function(i){t?i&&i(t):n.getPermissions(function(n){t=n;i&&i(t)})}}]).service("accountService",["$rootScope","domainAccountRepository","accountsService","ipRepository","accountInfoService",function(n,t,i,r,u){var f=1,e=1,o=5,s=function(t,i){n.$broadcast(t,i)};this.setMode=function(n){var t=OCCookies.getCookie("UserId");t==null&&redirectToLogin();u.getUserDataExtended({appId:o},function(t){t.Settings&&t.Settings.forEach(function(n){n.SettingId==2&&(f=2)});t.Permissions.ViewAllDomains&&t.Permissions.ViewAllDomains.Allow&&(e=-1);n()})};this.getAccounts=function(n,t,i){if(t.length==0||i!=undefined){t=[];n=[];var u=OCCookies.getCookie("UserId");u==null&&redirectToLogin();r.getCustomers({userId:u,graphId:f,level:e},function(r){t=r;var u=t[0].Id;t.forEach(function(i){i.childAccounts==undefined&&(i.childAccounts=[]);var r=t.filter(function(n){return n.Id==i.ParentId&&i.Id!=i.ParentId})[0];r!=undefined?(r.childAccounts==undefined&&(r.childAccounts=[]),i.showChilds=!0,r.childAccounts.push(i)):i.Id==u&&(i.showChilds=!0,n.push(i))});i(n)})}else i(n)};this.getLoggedInAccountForView=function(n){var i=OCCookies.getCookie("UserId");t.getLoggedInAccount({Id:i},function(t){n(t)},function(n){console.log(n)})};this.getPermittedAccounts=function(n){var i=OCCookies.getCookie("UserId");t.getPermittedAccounts({Id:i},function(t){n(t)},function(n){console.log(n)})}}]).service("domainAccountService",["domainAccountRepository",function(n){var u=this,t=[],i=[],r={};this.getUsers=function(i,r){i!=undefined&&i!="00000000-0000-0000-0000-000000000000"&&n.getAccountsUserList({Id:i},function(n){t=n;r(t)},function(n){console.log(n)})};this.getAccounts=function(t,r){t!=undefined&&t!="00000000-0000-0000-0000-000000000000"&&n.getAccountsDomainList({Id:t},function(n){i=n;r(i)},function(n){console.log(n)})};this.mergeAccountAndUsers=function(n,u){if(t.length!=0&&i.length!=0){var f={};t.forEach(function(n){f[n.Id.toString()]=n});i.forEach(function(n){var t="00000000-0000-0000-0000-000000000000",i="Unknown",u="Unknown",e;f[n.DomainUserDetails]!=undefined&&(t=f[n.DomainUserDetails].Id,i=f[n.DomainUserDetails].FirstName,u=f[n.DomainUserDetails].LastName);e={DomainUserDetails:n.DomainUserDetails,ParentDomainUserDetails:t,Id:n.Id,ParentId:n.ParentId,FirstName:i,LastName:u,Users:n.Users};r[n.DomainUserDetails]=e})}u(r)};this.accountForView=function(n,f){var e=n in r;e?f(r[n]):(this.getUsers(n,function(e){t=e;t.length!=0&&i.length!=0&&u.mergeAccountAndUsers(n,function(){f(r[n])})}),this.getAccounts(n,function(e){i=e;t.length!=0&&i.length!=0&&u.mergeAccountAndUsers(n,function(){f(r[n])})}))}}]).service("stoneViewService",["domainAccountService","domainNamesConfig",function(n,t){this.getDomainNames=function(n){t.getDomainNames(function(t){n(t)},function(n){console.log(n)})};this.getAccountDetails=function(t,i){t!=undefined&&t!="00000000-0000-0000-0000-000000000000"&&n.accountForView(t,function(n){i(n)})}}]),function(n){angular.module("ngCsv.config",[]).value("ngCsv.config",{debug:!0}).config(["$compileProvider",function(n){angular.isDefined(n.urlSanitizationWhitelist)?n.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]);angular.module("ngCsv.directives",["ngCsv.services"]);angular.module("ngCsv.services",[]);angular.module("ngCsv",["ngCsv.config","ngCsv.services","ngCsv.directives","ngSanitize"]);angular.module("ngCsv.services").service("CSV",["$q",function(n){var t="\r\n",r="﻿",i={"\\t":"\t","\\b":"\b","\\v":'\v',"\\f":"\f","\\r":"\r"};this.stringifyField=function(n,t){return t.decimalSep==="locale"&&this.isFloat(n)?n.toLocaleString():t.decimalSep!=="."&&this.isFloat(n)?n.toString().replace(".",t.decimalSep):typeof n=="string"?(n=n.replace(/"/g,'""'),(t.quoteStrings||n.indexOf(",")>-1||n.indexOf("\n")>-1||n.indexOf("\r")>-1)&&(n=t.txtDelim+n+t.txtDelim),n):typeof n=="boolean"?n?"TRUE":"FALSE":n};this.isFloat=function(n){return+n===n&&(!isFinite(n)||Boolean(n%1))};this.stringify=function(i,u){var f=n.defer(),s=this,e="",o="",h=n.when(i).then(function(n){var h,c,i;angular.isDefined(u.header)&&u.header&&(h=[],angular.forEach(u.header,function(n){this.push(s.stringifyField(n,u))},h),c=h.join(u.fieldSep?u.fieldSep:","),o+=c+t);i=[];angular.isArray(n)?i=n:angular.isFunction(n)&&(i=n());angular.forEach(i,function(n,r){var h=angular.copy(i[r]),f,e;e=[];angular.forEach(h,function(n){this.push(s.stringifyField(n,u))},e);f=e.join(u.fieldSep?u.fieldSep:",");o+=r<i.length?f+t:f});u.addByteOrderMarker&&(e+=r);e+=o;f.resolve(e)});return typeof h["catch"]=="function"&&h["catch"](function(n){f.reject(n)}),f.promise};this.isSpecialChar=function(n){return i[n]!==undefined};this.getSpecialChar=function(n){return i[n]}}]);angular.module("ngCsv.directives").directive("ngCsv",["$parse","$q","CSV","$document","$timeout",function(t,i,r,u,f){return{restrict:"AC",scope:{data:"&ngCsv",filename:"@filename",header:"&csvHeader",txtDelim:"@textDelimiter",decimalSep:"@decimalSeparator",quoteStrings:"@quoteStrings",fieldSep:"@fieldSeparator",lazyLoad:"@lazyLoad",addByteOrderMarker:"@addBom",ngClick:"&",charset:"@charset"},controller:["$scope","$element","$attrs","$transclude",function(n,t,u){function f(){var t={txtDelim:n.txtDelim?n.txtDelim:'"',decimalSep:n.decimalSep?n.decimalSep:".",quoteStrings:n.quoteStrings,addByteOrderMarker:n.addByteOrderMarker};return angular.isDefined(u.csvHeader)&&(t.header=n.$eval(n.header)),t.fieldSep=n.fieldSep?n.fieldSep:",",t.fieldSep=r.isSpecialChar(t.fieldSep)?r.getSpecialChar(t.fieldSep):t.fieldSep,t}n.csv="";angular.isDefined(n.lazyLoad)&&n.lazyLoad=="true"||angular.isArray(n.data)&&n.$watch("data",function(){n.buildCSV()},!0);n.getFilename=function(){return n.filename||"download.csv"};n.buildCSV=function(){var e=i.defer();return t.addClass(u.ngCsvLoadingClass||"ng-csv-loading"),r.stringify(n.data(),f()).then(function(i){n.csv=i;t.removeClass(u.ngCsvLoadingClass||"ng-csv-loading");e.resolve(i)}),n.$apply(),e.promise}}],link:function(t,i){function r(){var e=t.charset||"utf-8",r=new Blob([t.csv],{type:"text/csv;charset="+e+";"}),i;n.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(r,t.getFilename()):(i=angular.element("<a><\/a>"),i.attr("href",n.URL.createObjectURL(r)),i.attr("download",t.getFilename()),i.attr("target","_blank"),u.find("body").append(i),f(function(){i[0].click();i.remove()},null))}i.bind("click",function(){t.buildCSV().then(function(){r()});t.$apply()})}}}])}(window,document);angular.module("stoneListApp.services",["ngResource"]).factory("unifiedStoneAPI",["$resource",function(n){var t=OCCookies.getCookie("ACCESS_TOKEN");return t===null&&location.assign("/Account/Login?ReturnUrl="+location.pathname),n(ENV.SERVER_URL+":ctrl/:version/:func",{ctrl:"stone",version:"v1"},{getStoneByFriendly:{method:"GET",headers:{ACCESS_TOKEN:t},params:{func:""},isArray:!1},getStoneByStock:{method:"GET",headers:{ACCESS_TOKEN:t},params:{version:"v2",func:"bystockid"},isArray:!0},bulkGetStoneByFriendly:{method:"POST",headers:{ACCESS_TOKEN:t},params:{func:"getByFriendlyNames"},isArray:!0},bulkGetStoneByStock:{method:"POST",headers:{ACCESS_TOKEN:t},params:{func:"getByStockIds",ownerId:"@ownerId"},isArray:!0}})}]).service("stoneListService",["unifiedStoneAPI",function(n){function t(t,i,r,u){i==undefined||i=="stone"?n.getStoneByFriendly({friendlyName:t},function(n){r(n)},function(n){u(n)}):n.getStoneByStock({id:t},function(n){r(n)},function(n){u(n)})}this.bulkGetStoneByFriendly=function(t,i,r){n.bulkGetStoneByFriendly(t,function(n){angular.forEach(t,function(t){if(n.filter(function(n){return n.friendlyName===t}).length==0){var i={friendlyName:t,state:2,userInput:{stockId:""},error:{status:404,statusText:"Not Found"}};n.push(i)}});i(n)},function(n){r(n)})};this.bulkGetStoneByStock=function(t,i,r,u){n.bulkGetStoneByStock(t,i,function(n){angular.forEach(i,function(t){if(n.filter(function(n){return n.userInput.stockId===t}).length==0){var i={friendlyName:"",state:2,userInput:{stockId:t},error:{status:404,statusText:"Not Found"}};n.push(i)}});r(n)},function(n){u(n)})};this.getUnifiedStone=function(n,i,r,u){n!==undefined&&n!==""&&t(n,i,r,u)}}]),function(){"use strict";function n(){}angular.module("StoneService.Controllers").controller("RootCtrl",n);n.$inject=["$rootScope","$location","$http","ENV"]}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s,h,c){console.log("enter sobaka");c.query({},function(n){t.bookmarkedRepositories=n;console.log("bookmarks got!");console.log(n.length)});t.search=function(){h.get({query:t.query},function(n){t.repositories=n.items;c.query({},function(n){t.bookmarkedRepositories=n})})};t.addBookmark=function(n){c.save({},n,function(){c.query({},function(n){t.bookmarkedRepositories=n})})};t.isBookmarked=function(n){return t.bookmarkedRepositories.find(function(t){return t.id===n})};t.showBookmarks=function(){n.bookmarkModalInstance=o.create("partials/bookMarkedList.html?___version___","BookmarkListCtrl",{},{keyboard:!1,backdrop:"static",animation:!0})}}angular.module("StoneService.Controllers").controller("RepositoryListCtrl",n);n.$inject=["$rootScope","$scope","$timeout","$location","$filter","$route","prompt","dialogs","ENV","RepositorySearch","Bookmark"]}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s,h){console.log("enter sobaka");h.query({},function(n){t.repositories=n});t.close=function(){n.bookmarkModalInstance.close()}}angular.module("StoneService.Controllers").controller("BookmarkListCtrl",n);n.$inject=["$rootScope","$scope","$timeout","$location","$filter","$route","prompt","dialogs","ENV","Bookmark"]}(),function(){"use strict";function n(n,t,i,r){n.action=r?r.action:null}angular.module("StoneService.Controllers").controller("ErrorCtrl",n);n.$inject=["$scope","$timeout","$location","$routeParams"]}(),function(){"use strict";function n(){return function(n,t){var i=[];return angular.isArray(n)?n.forEach(function(n){var r=t.toLowerCase(),u=n.toLowerCase(),f=u.substr(0,r.length);f===r&&i.push(n)}):i=n,i}}angular.module("StoneService.Filters").filter("startWithTypeahead",n)}(),function(){"use strict";function n(){return function(n,t){if(n&&t){var r=n.replace(/(\*|\s+|\s|\\|\"|\t|\r|\n|-|–|_|\/)/g,"").toLowerCase(),i=t.filter(function(n){return n.name.toLowerCase()===r});return i&&i.length>0?i[0]["default-display"]:n}return n}}angular.module("StoneService.Filters").filter("getdisplayvalue",n)}(),function(){"use strict";function n(){return function(n){return n===0?n.toFixed(3):n?n&&angular.isNumber(n)?n.toFixed(3):0:null}}angular.module("StoneService.Filters").filter("points3",n)}(),function(){"use strict";function n(){return function(n){return n?n.isValid?"Exists":n.isUploading?"Uploading":"Uploaded":""}}angular.module("StoneService.Filters").filter("attachmentStatus",n)}(),function(){"use strict";function n(){return function(n){return n&&angular.isNumber(n)?n.toFixed(3):""}}angular.module("StoneService.Filters").filter("caratpoints3",n)}(),function(){"use strict";function n(){return function(n){return n!=undefined?n.replace(new RegExp("<br>","g")," "):n}}angular.module("StoneService.Filters").filter("newlines",n)}(),function(){"use strict";function n(n){return{require:"?ngModel",link:function(t,i,r,u){if(u){u.$formatters.unshift(function(){return n(r.points3Format)(u.$modelValue)});i.on("blur",function(){t.$apply(function(){var t=u.$viewValue.indexOf(".");(t===-1||u.$viewValue.length<t+4)&&(u.$viewValue=n(r.points3Format)(u.$modelValue),u.$render())})})}}}}n.$inject=["$filter"];angular.module("StoneService.Directives").directive("points3Format",n)}(),function(){"use strict";function n(){return{restrict:"E",templateUrl:"partials/header.html?___version___",replace:!0,scope:!0}}angular.module("StoneService.Directives").directive("mainHeader",n)}(),function(){"use strict";function n(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.push(function(n){return n});r.$formatters.push(function(n){return new Date(n)})}}}angular.module("StoneService.Directives").directive("modelDateFilter",n)}(),function(){"use strict";function n(){return{restrict:"A",link:function(n,t,i){var r=n.$eval(i.customOnChange);t.bind("change",r)}}}angular.module("StoneService.Directives").directive("customOnChange",n)}();angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(n,t){function i(n,t,i){if(angular.isArray(n))for(var r=n.length;r--;)if(i(n[r],t))return!0;return!1}function r(n,t,r){return n=angular.isArray(n)?n:[],i(n,t,r)||n.push(t),n}function u(n,t,i){if(angular.isArray(n))for(var r=n.length;r--;)if(i(n[r],t)){n.splice(r,1);break}return n}function f(f,e,o){function w(n,t){var i=a(f.$parent);angular.isFunction(v)&&(t===!0?v(f.$parent,r(i,n,s)):v(f.$parent,u(i,n,s)))}function b(n){if(c&&c(f)===!1){w(l,f[o.ngModel]);return}f[o.ngModel]=i(n,l,s)}var h=o.checklistModel,y;o.$set("checklistModel",null);t(e)(f);o.$set("checklistModel",h);var a=n(h),v=a.assign,p=n(o.checklistChange),c=n(o.checklistBeforeChange),l=o.checklistValue?n(o.checklistValue)(f.$parent):o.value,s=angular.equals;o.hasOwnProperty("checklistComparator")&&(o.checklistComparator[0]=="."?(y=o.checklistComparator.substring(1),s=function(n,t){return n[y]===t[y]}):s=n(o.checklistComparator)(f.$parent));f.$watch(o.ngModel,function(n,t){if(n!==t){if(c&&c(f)===!1){f[o.ngModel]=i(a(f.$parent),l,s);return}w(l,n);p&&p(f)}});angular.isFunction(f.$parent.$watchCollection)?f.$parent.$watchCollection(h,b):f.$parent.$watch(h,b,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(n,t){if((n[0].tagName!=="INPUT"||t.type!=="checkbox")&&n[0].tagName!=="MD-CHECKBOX"&&!t.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!t.checklistValue&&!t.value)throw"You should provide `value` or `checklist-value`.";return t.ngModel||t.$set("ngModel","checked"),f}}}]);domainAccountAppDirectives=angular.module("domainAccountApp.directives",[]);domainAccountAppDirectives.directive("accountInfo",function(){return{templateUrl:"UIComponent/DomainAccountTree/html/AccountInfo.html",restrict:"E",scope:{accountId:"=",onAccountLoaded:"&"},controller:"AccountInfoCtrl"}});domainAccountAppDirectives=angular.module("domainAccountApp.directives",[]);domainAccountAppDirectives.directive("accountSelection",function(){return{templateUrl:"UIComponent/DomainAccountTree/html/AccountSelection.html",restrict:"E",replace:!0,scope:{selectedDomain:"=?",modalId:"=?",configSettings:"=?",onControlSettingsUpdate:"=?",onAccountSelected:"=?"},controller:"AccountSelectionCtrl"}});domainAccountAppDirectives.directive("accountManager",[function(){return{restrict:"E",replace:!0,scope:{public:"=",onControlSettingsUpdate:"=",onSelectionUpdate:"&",configSettings:"=?"},controller:"AccountManagerCtrl",templateUrl:"UIComponent/DomainAccountTree/html/DomainAccountTree.html",link:function(n){n.$watch("selectedAccountIds",function(t){t==undefined&&(t=[]);t!=n.getSelectedAccountIds()&&n.setSelectedAccountIds()})}}}]);stoneListAppDirectives=angular.module("stoneListApp.directives",[]);stoneListAppDirectives.directive("stoneList",function(){return{restrict:"E",replace:!0,scope:{removeStones:"=",removeStonesByStock:"=",disablePasteEvent:"=",onAccountChange:"=",validateStone:"=",detailesToDisplay:"=",getStoneBySelectedAccount:"=",idTypeSelected:"=",stones:"="},controller:"stoneListCtrl",templateUrl:"UIComponent/StoneList/html/StoneListView.html"}}),function(){"use strict";function n(){return{}}n.$inject=["$q","$location","ipCookie"];angular.module("StoneService.Http").factory("httpInterceptor",n)}(),function(){"use strict";function n(){angular.bootstrap(document,["StoneService"])}n.$inject=["$http","$location","ipCookie"];angular.module("StoneService.Bootstarper").factory("runBlock",n).run(n)}();angular.bootstrap(document.createElement("div"),["StoneService.Bootstarper"]);
//# sourceMappingURL=app.bundle.min.js.map